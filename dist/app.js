(()=>{function t(t){return t&&t.__esModule?t.default:t}
/* @license twgl.js 4.24.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let e=Float32Array;function n(t,n,r){const i=new e(3);return t&&(i[0]=t),n&&(i[1]=n),r&&(i[2]=r),i}function r(t,n,r){return(r=r||new e(3))[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function i(t,n,r){return(r=r||new e(3))[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r}function o(t,n,r){r=r||new e(3);const i=t[2]*n[0]-t[0]*n[2],o=t[0]*n[1]-t[1]*n[0];return r[0]=t[1]*n[2]-t[2]*n[1],r[1]=i,r[2]=o,r}function s(t,n){n=n||new e(3);const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.sqrt(r);return i>1e-5?(n[0]=t[0]/i,n[1]=t[1]/i,n[2]=t[2]/i):(n[0]=0,n[1]=0,n[2]=0),n}function a(t,n,r){return(r=r||new e(3))[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r}let c,u,f,l=Float32Array;function h(t,e){return(e=e||new l(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function m(t){return(t=t||new l(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e){e=e||new l(16);const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],u=t[7],f=t[8],h=t[9],m=t[10],g=t[11],d=t[12],p=t[13],y=t[14],v=t[15],b=m*v,x=y*g,A=c*v,w=y*u,z=c*g,T=m*u,_=i*v,E=y*o,P=i*g,I=m*o,F=i*u,S=c*o,M=f*p,U=d*h,R=s*p,C=d*a,B=s*h,k=f*a,O=n*p,L=d*r,D=n*h,N=f*r,G=n*a,Y=s*r,H=b*a+w*h+z*p-(x*a+A*h+T*p),$=x*r+_*h+I*p-(b*r+E*h+P*p),W=A*r+E*a+F*p-(w*r+_*a+S*p),q=T*r+P*a+S*h-(z*r+I*a+F*h),j=1/(n*H+s*$+f*W+d*q);return e[0]=j*H,e[1]=j*$,e[2]=j*W,e[3]=j*q,e[4]=j*(x*s+A*f+T*d-(b*s+w*f+z*d)),e[5]=j*(b*n+E*f+P*d-(x*n+_*f+I*d)),e[6]=j*(w*n+_*s+S*d-(A*n+E*s+F*d)),e[7]=j*(z*n+I*s+F*f-(T*n+P*s+S*f)),e[8]=j*(M*u+C*g+B*v-(U*u+R*g+k*v)),e[9]=j*(U*o+O*g+N*v-(M*o+L*g+D*v)),e[10]=j*(R*o+L*u+G*v-(C*o+O*u+Y*v)),e[11]=j*(k*o+D*u+Y*g-(B*o+N*u+G*g)),e[12]=j*(R*m+k*y+U*c-(B*y+M*c+C*m)),e[13]=j*(D*y+M*i+L*m-(O*m+N*y+U*i)),e[14]=j*(O*c+Y*y+C*i-(G*y+R*i+L*c)),e[15]=j*(G*m+B*i+N*c-(D*c+Y*m+k*i)),e}function d(t,e,r){r=r||n();const i=e[0],o=e[1],s=e[2],a=i*t[3]+o*t[7]+s*t[11]+t[15];return r[0]=(i*t[0]+o*t[4]+s*t[8]+t[12])/a,r[1]=(i*t[1]+o*t[5]+s*t[9]+t[13])/a,r[2]=(i*t[2]+o*t[6]+s*t[10]+t[14])/a,r}function p(t,e,r){r=r||n();const i=e[0],o=e[1],s=e[2];return r[0]=i*t[0]+o*t[4]+s*t[8],r[1]=i*t[1]+o*t[5]+s*t[9],r[2]=i*t[2]+o*t[6]+s*t[10],r}var y=Object.freeze({__proto__:null,axisRotate:function(t,e,n,r){r=r||new l(16);let i=e[0],o=e[1],s=e[2];const a=Math.sqrt(i*i+o*o+s*s);i/=a,o/=a,s/=a;const c=i*i,u=o*o,f=s*s,h=Math.cos(n),m=Math.sin(n),g=1-h,d=c+(1-c)*h,p=i*o*g+s*m,y=i*s*g-o*m,v=i*o*g-s*m,b=u+(1-u)*h,x=o*s*g+i*m,A=i*s*g+o*m,w=o*s*g-i*m,z=f+(1-f)*h,T=t[0],_=t[1],E=t[2],P=t[3],I=t[4],F=t[5],S=t[6],M=t[7],U=t[8],R=t[9],C=t[10],B=t[11];return r[0]=d*T+p*I+y*U,r[1]=d*_+p*F+y*R,r[2]=d*E+p*S+y*C,r[3]=d*P+p*M+y*B,r[4]=v*T+b*I+x*U,r[5]=v*_+b*F+x*R,r[6]=v*E+b*S+x*C,r[7]=v*P+b*M+x*B,r[8]=A*T+w*I+z*U,r[9]=A*_+w*F+z*R,r[10]=A*E+w*S+z*C,r[11]=A*P+w*M+z*B,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,n){n=n||new l(16);let r=t[0],i=t[1],o=t[2];const s=Math.sqrt(r*r+i*i+o*o);r/=s,i/=s,o/=s;const a=r*r,c=i*i,u=o*o,f=Math.cos(e),h=Math.sin(e),m=1-f;return n[0]=a+(1-a)*f,n[1]=r*i*m+o*h,n[2]=r*o*m-i*h,n[3]=0,n[4]=r*i*m-o*h,n[5]=c+(1-c)*f,n[6]=i*o*m+r*h,n[7]=0,n[8]=r*o*m+i*h,n[9]=i*o*m-r*h,n[10]=u+(1-u)*f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:h,create:function(){return new l(16).fill(0)},frustum:function(t,e,n,r,i,o,s){const a=e-t,c=r-n,u=i-o;return(s=s||new l(16))[0]=2*i/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*i/c,s[6]=0,s[7]=0,s[8]=(t+e)/a,s[9]=(r+n)/c,s[10]=o/u,s[11]=-1,s[12]=0,s[13]=0,s[14]=i*o/u,s[15]=0,s},getAxis:function(t,e,r){const i=4*e;return(r=r||n())[0]=t[i+0],r[1]=t[i+1],r[2]=t[i+2],r},getTranslation:function(t,e){return(e=e||n())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:m,inverse:g,lookAt:function(t,e,r,a){return a=a||new l(16),c=c||n(),u=u||n(),f=f||n(),s(i(t,e,f),f),s(o(r,f,c),c),s(o(f,c,u),u),a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=0,a[4]=u[0],a[5]=u[1],a[6]=u[2],a[7]=0,a[8]=f[0],a[9]=f[1],a[10]=f[2],a[11]=0,a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1,a},multiply:function(t,e,n){n=n||new l(16);const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],f=t[7],h=t[8],m=t[9],g=t[10],d=t[11],p=t[12],y=t[13],v=t[14],b=t[15],x=e[0],A=e[1],w=e[2],z=e[3],T=e[4],_=e[5],E=e[6],P=e[7],I=e[8],F=e[9],S=e[10],M=e[11],U=e[12],R=e[13],C=e[14],B=e[15];return n[0]=r*x+a*A+h*w+p*z,n[1]=i*x+c*A+m*w+y*z,n[2]=o*x+u*A+g*w+v*z,n[3]=s*x+f*A+d*w+b*z,n[4]=r*T+a*_+h*E+p*P,n[5]=i*T+c*_+m*E+y*P,n[6]=o*T+u*_+g*E+v*P,n[7]=s*T+f*_+d*E+b*P,n[8]=r*I+a*F+h*S+p*M,n[9]=i*I+c*F+m*S+y*M,n[10]=o*I+u*F+g*S+v*M,n[11]=s*I+f*F+d*S+b*M,n[12]=r*U+a*R+h*C+p*B,n[13]=i*U+c*R+m*C+y*B,n[14]=o*U+u*R+g*C+v*B,n[15]=s*U+f*R+d*C+b*B,n},negate:function(t,e){return(e=e||new l(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,r,i,o,s){return(s=s||new l(16))[0]=2/(e-t),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(r-n),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(i-o),s[11]=0,s[12]=(e+t)/(t-e),s[13]=(r+n)/(n-r),s[14]=(o+i)/(i-o),s[15]=1,s},perspective:function(t,e,n,r,i){i=i||new l(16);const o=Math.tan(.5*Math.PI-.5*t),s=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*s,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*s*2,i[15]=0,i},rotateX:function(t,e,n){n=n||new l(16);const r=t[4],i=t[5],o=t[6],s=t[7],a=t[8],c=t[9],u=t[10],f=t[11],h=Math.cos(e),m=Math.sin(e);return n[4]=h*r+m*a,n[5]=h*i+m*c,n[6]=h*o+m*u,n[7]=h*s+m*f,n[8]=h*a-m*r,n[9]=h*c-m*i,n[10]=h*u-m*o,n[11]=h*f-m*s,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new l(16);const r=t[0],i=t[1],o=t[2],s=t[3],a=t[8],c=t[9],u=t[10],f=t[11],h=Math.cos(e),m=Math.sin(e);return n[0]=h*r-m*a,n[1]=h*i-m*c,n[2]=h*o-m*u,n[3]=h*s-m*f,n[8]=h*a+m*r,n[9]=h*c+m*i,n[10]=h*u+m*o,n[11]=h*f+m*s,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new l(16);const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],f=t[7],h=Math.cos(e),m=Math.sin(e);return n[0]=h*r+m*a,n[1]=h*i+m*c,n[2]=h*o+m*u,n[3]=h*s+m*f,n[4]=h*a-m*r,n[5]=h*c-m*i,n[6]=h*u-m*o,n[7]=h*f-m*s,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new l(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new l(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new l(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new l(16);const r=e[0],i=e[1],o=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=i*t[4],n[5]=i*t[5],n[6]=i*t[6],n[7]=i*t[7],n[8]=o*t[8],n[9]=o*t[9],n[10]=o*t[10],n[11]=o*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new l(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,r){r!==t&&(r=h(t,r));const i=4*n;return r[i+0]=e[0],r[i+1]=e[1],r[i+2]=e[2],r},setDefaultType:function(t){const e=l;return l=t,e},setTranslation:function(t,e,n){return t!==(n=n||m())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:p,transformNormal:function(t,e,r){r=r||n();const i=g(t),o=e[0],s=e[1],a=e[2];return r[0]=o*i[0]+s*i[1]+a*i[2],r[1]=o*i[4]+s*i[5]+a*i[6],r[2]=o*i[8]+s*i[9]+a*i[10],r},transformPoint:d,translate:function(t,e,n){n=n||new l(16);const r=e[0],i=e[1],o=e[2],s=t[0],a=t[1],c=t[2],u=t[3],f=t[4],h=t[5],m=t[6],g=t[7],d=t[8],p=t[9],y=t[10],v=t[11],b=t[12],x=t[13],A=t[14],w=t[15];return t!==n&&(n[0]=s,n[1]=a,n[2]=c,n[3]=u,n[4]=f,n[5]=h,n[6]=m,n[7]=g,n[8]=d,n[9]=p,n[10]=y,n[11]=v),n[12]=s*r+f*i+d*o+b,n[13]=a*r+h*i+p*o+x,n[14]=c*r+m*i+y*o+A,n[15]=u*r+g*i+v*o+w,n},translation:function(t,e){return(e=e||new l(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new l(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],u=t[7],f=t[8],h=t[9],m=t[10],g=t[11],d=t[12],p=t[13],y=t[14],v=t[15];return e[0]=n,e[1]=s,e[2]=f,e[3]=d,e[4]=r,e[5]=a,e[6]=h,e[7]=p,e[8]=i,e[9]=c,e[10]=m,e[11]=y,e[12]=o,e[13]=u,e[14]=g,e[15]=v,e}});const v=5120,b=5121,x=5122,A=5123,w=5124,z=5125,T=5126,_={};{const t=_;t[5120]=Int8Array,t[5121]=Uint8Array,t[5122]=Int16Array,t[5123]=Uint16Array,t[5124]=Int32Array,t[5125]=Uint32Array,t[5126]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function E(t){if(t instanceof Int8Array)return v;if(t instanceof Uint8Array)return b;if(t instanceof Uint8ClampedArray)return b;if(t instanceof Int16Array)return x;if(t instanceof Uint16Array)return A;if(t instanceof Int32Array)return w;if(t instanceof Uint32Array)return z;if(t instanceof Float32Array)return T;throw new Error("unsupported typed array type")}function P(t){if(t===Int8Array)return v;if(t===Uint8Array)return b;if(t===Uint8ClampedArray)return b;if(t===Int16Array)return x;if(t===Uint16Array)return A;if(t===Int32Array)return w;if(t===Uint32Array)return z;if(t===Float32Array)return T;throw new Error("unsupported typed array type")}const I="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function F(...t){console.error(...t)}function S(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}const M=34962,U={attribPrefix:""};function R(t,e,n,r,i){t.bindBuffer(e,n),t.bufferData(e,r,i||35044)}function C(t,e,n,r){if(i=e,"undefined"!=typeof WebGLBuffer&&i instanceof WebGLBuffer)return e;var i;n=n||M;const o=t.createBuffer();return R(t,n,o,e,r),o}function B(t){return"indices"===t}function k(t){return t.length?t:t.data}const O=/coord|texture/i,L=/color|colour/i;function D(t,e){let n;if(n=O.test(t)?2:L.test(t)?4:3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function N(t,e){return t.numComponents||t.size||D(e,k(t).length)}function G(t,e){if(I(t))return t;if(I(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type;return n||(n=B(e)?Uint16Array:Float32Array),new n(t.data)}function Y(t,e){const n={};return Object.keys(e).forEach((function(r){if(!B(r)){const o=e[r],s=o.attrib||o.name||o.attribName||U.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!I(o.value))throw new Error("array.value is not array or typedarray");n[s]={value:o.value}}else{let e,a,c,u;if(o.buffer&&o.buffer instanceof WebGLBuffer)e=o.buffer,u=o.numComponents||o.size,a=o.type,c=o.normalize;else if("number"==typeof o||"number"==typeof o.data){const n=o.data||o,s=o.type||Float32Array,f=n*s.BYTES_PER_ELEMENT;a=P(s),c=void 0!==o.normalize?o.normalize:(i=s)===Int8Array||i===Uint8Array,u=o.numComponents||o.size||D(r,n),e=t.createBuffer(),t.bindBuffer(M,e),t.bufferData(M,f,o.drawType||35044)}else{const n=G(o,r);e=C(t,n,void 0,o.drawType),a=E(n),c=void 0!==o.normalize?o.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(n),u=N(o,r)}n[s]={buffer:e,numComponents:u,type:a,normalize:c,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var i})),t.bindBuffer(M,null),n}const H=["position","positions","a_position"];function $(t,e,n){const r=Y(t,e),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);const o=e.indices;if(o){const e=G(o,"indices");i.indices=C(t,e,34963),i.numElements=e.length,i.elementType=E(e)}else i.numElements||(i.numElements=function(t,e){let n,r;for(r=0;r<H.length&&(n=H[r],!(n in e))&&(n=U.attribPrefix+n,!(n in e));++r);r===H.length&&(n=Object.keys(e)[0]);const i=e[n];if(!i.buffer)return 1;t.bindBuffer(M,i.buffer);const o=t.getBufferParameter(M,34660);var s;t.bindBuffer(M,null);const a=o/(5120===(s=i.type)||5121===s?1:5122===s||5123===s?2:5124===s||5125===s||5126===s?4:0),c=i.numComponents||i.size,u=a/c;if(u%1!=0)throw new Error(`numComponents ${c} not correct for length ${length}`);return u}(t,i.attribs));return i}function W(t,e,n){const r="indices"===n?34963:M;return C(t,G(e,n),r)}function q(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=W(t,e[r],r)})),e.indices?(n.numElements=e.indices.length,n.elementType=E(G(e.indices))):n.numElements=function(t){let e,n;for(n=0;n<H.length&&(e=H[n],!(e in t));++n);n===H.length&&(e=Object.keys(t)[0]);const r=t[e],i=k(r).length;if(void 0===i)return 1;const o=N(r,e),s=i/o;if(i%o>0)throw new Error(`numComponents ${o} not correct for length ${i}`);return s}(e),n}function j(t,e){let n=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const r=arguments[e];if(r instanceof Array||I(r))for(let e=0;e<r.length;++e)t[n++]=r[e];else t[n++]=r}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function Q(t,e,n){return j(new(n||Float32Array)(t*e),t)}function X(t,e,n){const r=t.length,i=new Float32Array(3);for(let o=0;o<r;o+=3)n(e,[t[o],t[o+1],t[o+2]],i),t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2]}function V(t,e,r){r=r||n();const i=e[0],o=e[1],s=e[2];return r[0]=i*t[0]+o*t[1]+s*t[2],r[1]=i*t[4]+o*t[5]+s*t[6],r[2]=i*t[8]+o*t[9]+s*t[10],r}function K(t,e){return X(t,e,p),t}function Z(t,e){return X(t,g(e),V),t}function J(t,e){return X(t,e,d),t}function tt(t,e){return Object.keys(t).forEach((function(n){const r=t[n];n.indexOf("pos")>=0?J(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?K(r,e):n.indexOf("norm")>=0&&Z(r,e)})),t}function et(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function nt(t,e,n,r,i){t=t||1,e=e||1,n=n||1,r=r||1,i=i||m();const o=(n+1)*(r+1),s=Q(3,o),a=Q(3,o),c=Q(2,o);for(let i=0;i<=r;i++)for(let o=0;o<=n;o++){const u=o/n,f=i/r;s.push(t*u-.5*t,0,e*f-.5*e),a.push(0,1,0),c.push(u,f)}const u=n+1,f=Q(3,n*r*2,Uint16Array);for(let t=0;t<r;t++)for(let e=0;e<n;e++)f.push((t+0)*u+e,(t+1)*u+e,(t+0)*u+e+1),f.push((t+1)*u+e,(t+1)*u+e+1,(t+0)*u+e+1);return tt({position:s,normal:a,texcoord:c,indices:f},i)}function rt(t,e,n,r,i,o,s){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||0;const a=(i=i||Math.PI)-r,c=(s=s||2*Math.PI)-o,u=(e+1)*(n+1),f=Q(3,u),l=Q(3,u),h=Q(2,u);for(let i=0;i<=n;i++)for(let s=0;s<=e;s++){const u=s/e,m=i/n,g=c*u+o,d=a*m+r,p=Math.sin(g),y=Math.cos(g),v=Math.sin(d),b=y*v,x=Math.cos(d),A=p*v;f.push(t*b,t*x,t*A),l.push(b,x,A),h.push(1-u,m)}const m=e+1,g=Q(3,e*n*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<n;e++)g.push((e+0)*m+t,(e+0)*m+t+1,(e+1)*m+t),g.push((e+1)*m+t,(e+0)*m+t+1,(e+1)*m+t+1);return{position:f,normal:l,texcoord:h,indices:g}}const it=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function ot(t){const e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=Q(3,24),s=Q(3,24),a=Q(2,24),c=Q(3,12,Uint16Array);for(let t=0;t<6;++t){const e=it[t];for(let c=0;c<4;++c){const u=n[e[c]],f=r[t],l=i[c];o.push(u),s.push(f),a.push(l)}const u=4*t;c.push(u+0,u+1,u+2),c.push(u+0,u+2,u+3)}return{position:o,normal:s,texcoord:a,indices:c}}function st(t,e,n,r,i,o,s){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");const a=void 0===o||o,c=void 0===s||s,u=(a?2:0)+(c?2:0),f=(r+1)*(i+1+u),l=Q(3,f),h=Q(3,f),m=Q(2,f),g=Q(3,r*(i+u/2)*2,Uint16Array),d=r+1,p=Math.atan2(t-e,n),y=Math.cos(p),v=Math.sin(p),b=i+(c?2:0);for(let o=a?-2:0;o<=b;++o){let s,a=o/i,c=n*a;o<0?(c=0,a=1,s=t):o>i?(c=n,a=1,s=e):s=t+o/i*(e-t),-2!==o&&o!==i+2||(s=0,a=0),c-=n/2;for(let t=0;t<d;++t){const e=Math.sin(t*Math.PI*2/r),n=Math.cos(t*Math.PI*2/r);l.push(e*s,c,n*s),o<0?h.push(0,-1,0):o>i?h.push(0,1,0):0===s?h.push(0,0,0):h.push(e*y,v,n*y),m.push(t/r,1-a)}}for(let t=0;t<i+u;++t)if(!(1===t&&a||t===i+u-2&&c))for(let e=0;e<r;++e)g.push(d*(t+0)+0+e,d*(t+0)+1+e,d*(t+1)+1+e),g.push(d*(t+0)+0+e,d*(t+1)+1+e,d*(t+1)+0+e);return{position:l,normal:h,texcoord:m,indices:g}}function at(t,e){e=e||[];const n=[];for(let r=0;r<t.length;r+=4){const i=t[r],o=t.slice(r+1,r+4);o.push.apply(o,e);for(let t=0;t<i;++t)n.push.apply(n,o)}return n}function ct(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=at([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=at([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=t.length/3,i={position:Q(3,r),texcoord:Q(2,r),normal:Q(3,r),color:Q(4,r,Uint8Array),indices:Q(3,r/3,Uint16Array)};i.position.push(t),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(e),i.color.push(n);for(let t=0;t<r;++t)i.indices.push(t);return i}function ut(t,e,n,i,o,s,c){if(o<=0)throw new Error("subdivisionDown must be > 0");const u=(c=c||1)-(s=s||0),f=2*(o+1)*4,l=Q(3,f),h=Q(3,f),m=Q(2,f);function g(t,e,n){return t+(e-t)*n}function d(e,n,c,f,d,p){for(let y=0;y<=o;y++){const v=n/1,b=y/o,x=2*(v-.5),A=(s+b*u)*Math.PI,w=Math.sin(A),z=Math.cos(A),T=g(t,e,w),_=x*i,E=z*t,P=w*T;l.push(_,E,P);const I=r(a([0,w,z],c),f);h.push(I),m.push(v*d+p,b)}}for(let t=0;t<2;t++){const r=2*(t/1-.5);d(e,t,[1,1,1],[0,0,0],1,0),d(e,t,[0,0,0],[r,0,0],0,0),d(n,t,[1,1,1],[0,0,0],1,0),d(n,t,[0,0,0],[r,0,0],0,1)}const p=Q(3,2*o*4,Uint16Array);function y(t,e){for(let n=0;n<o;++n)p.push(t+n+0,t+n+1,e+n+0),p.push(t+n+1,e+n+1,e+n+0)}const v=o+1;return y(0*v,4*v),y(5*v,7*v),y(6*v,2*v),y(3*v,1*v),{position:l,normal:h,texcoord:m,indices:p}}function ft(t,e,n,r,i,o){return st(t,t,e,n,r,i,o)}function lt(t,e,n,r,i,o){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;const s=(o=o||2*Math.PI)-i,a=n+1,c=r+1,u=a*c,f=Q(3,u),l=Q(3,u),h=Q(2,u),m=Q(3,n*r*2,Uint16Array);for(let o=0;o<c;++o){const c=o/r,u=c*Math.PI*2,m=Math.sin(u),g=t+m*e,d=Math.cos(u),p=d*e;for(let t=0;t<a;++t){const e=t/n,r=i+e*s,o=Math.sin(r),a=Math.cos(r),u=o*g,y=a*g,v=o*m,b=a*m;f.push(u,p,y),l.push(v,d,b),h.push(e,1-c)}}for(let t=0;t<r;++t)for(let e=0;e<n;++e){const n=1+e,r=1+t;m.push(a*t+e,a*r+e,a*t+n),m.push(a*r+e,a*r+n,a*t+n)}return{position:f,normal:l,texcoord:h,indices:m}}function ht(t,e,n,r,i){if(e<3)throw new Error("divisions must be at least 3");i=i||1,r=r||0;const o=(e+1)*((n=n||1)+1),s=Q(3,o),a=Q(3,o),c=Q(2,o),u=Q(3,n*e*2,Uint16Array);let f=0;const l=t-r,h=e+1;for(let t=0;t<=n;++t){const o=r+l*Math.pow(t/n,i);for(let r=0;r<=e;++r){const i=2*Math.PI*r/e,l=o*Math.cos(i),m=o*Math.sin(i);if(s.push(l,0,m),a.push(0,1,0),c.push(1-r/e,t/n),t>0&&r!==e){const t=f+(r+1),e=f+r,n=f+r-h,i=f+(r+1)-h;u.push(t,e,n),u.push(t,n,i)}}f+=e+1}return{position:s,normal:a,texcoord:c,indices:u}}function mt(t){return function(e){const n=t.apply(this,Array.prototype.slice.call(arguments,1));return q(e,n)}}function gt(t){return function(e){const n=t.apply(null,Array.prototype.slice.call(arguments,1));return $(e,n)}}gt(ct),mt(ct),gt(ot),mt(ot),gt(nt),mt(nt),gt(rt),mt(rt),gt(st),mt(st),gt(et),mt(et),gt(ut),mt(ut),gt(ft),mt(ft),gt(lt),mt(lt),gt(ht),mt(ht);function dt(t){return!!t.texStorage2D}const pt=function(){const t={},e={};return function(n,r){return function(n){const r=n.constructor.name;if(!t[r]){for(const t in n)if("number"==typeof n[t]){const r=e[n[t]];e[n[t]]=r?`${r} | ${t}`:t}t[r]=!0}}(n),e[r]||("number"==typeof r?`0x${r.toString(16)}`:r)}}();new Uint8Array([128,192,255,255]),function(){let t}();const yt={};{const t=yt;t[6406]={numColorComponents:1},t[6409]={numColorComponents:1},t[6410]={numColorComponents:2},t[6407]={numColorComponents:3},t[6408]={numColorComponents:4},t[6403]={numColorComponents:1},t[36244]={numColorComponents:1},t[33319]={numColorComponents:2},t[33320]={numColorComponents:2},t[6407]={numColorComponents:3},t[36248]={numColorComponents:3},t[6408]={numColorComponents:4},t[36249]={numColorComponents:4},t[6402]={numColorComponents:1},t[34041]={numColorComponents:2}}const vt=F;function bt(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const xt=33984,At=34962,wt=5126,zt=5124,Tt=5125,_t=3553,Et=34067,Pt=32879,It=35866,Ft={};function St(t,e){return Ft[e].bindPoint}function Mt(t,e){return function(n){t.uniform1i(e,n)}}function Ut(t,e){return function(n){t.uniform1iv(e,n)}}function Rt(t,e){return function(n){t.uniform2iv(e,n)}}function Ct(t,e){return function(n){t.uniform3iv(e,n)}}function Bt(t,e){return function(n){t.uniform4iv(e,n)}}function kt(t,e,n,r){const i=St(0,e);return dt(t)?function(e){let o,s;S(0,e)?(o=e,s=null):(o=e.texture,s=e.sampler),t.uniform1i(r,n),t.activeTexture(xt+n),t.bindTexture(i,o),t.bindSampler(n,s)}:function(e){t.uniform1i(r,n),t.activeTexture(xt+n),t.bindTexture(i,e)}}function Ot(t,e,n,r,i){const o=St(0,e),s=new Int32Array(i);for(let t=0;t<i;++t)s[t]=n+t;return dt(t)?function(e){t.uniform1iv(r,s),e.forEach((function(e,r){let i,a;t.activeTexture(xt+s[r]),S(0,e)?(i=e,a=null):(i=e.texture,a=e.sampler),t.bindSampler(n,a),t.bindTexture(o,i)}))}:function(e){t.uniform1iv(r,s),e.forEach((function(e,n){t.activeTexture(xt+s[n]),t.bindTexture(o,e)}))}}function Lt(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(At,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||wt,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Dt(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(At,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||zt,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Nt(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(At,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||Tt,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Gt(t,e,n){const r=n.size,i=n.count;return function(n){t.bindBuffer(At,n.buffer);const o=n.size||n.numComponents||r,s=o/i,a=n.type||wt,c=Ft[a].size*o,u=n.normalize||!1,f=n.offset||0,l=c/i;for(let r=0;r<i;++r)t.enableVertexAttribArray(e+r),t.vertexAttribPointer(e+r,s,a,u,c,f+l*r),void 0!==n.divisor&&t.vertexAttribDivisor(e+r,n.divisor)}}Ft[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},Ft[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}},cols:2},Ft[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}},cols:3},Ft[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}},cols:4},Ft[5124]={Type:Int32Array,size:4,setter:Mt,arraySetter:Ut},Ft[35667]={Type:Int32Array,size:8,setter:Rt,cols:2},Ft[35668]={Type:Int32Array,size:12,setter:Ct,cols:3},Ft[35669]={Type:Int32Array,size:16,setter:Bt,cols:4},Ft[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},Ft[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}},cols:2},Ft[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}},cols:3},Ft[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}},cols:4},Ft[35670]={Type:Uint32Array,size:4,setter:Mt,arraySetter:Ut},Ft[35671]={Type:Uint32Array,size:8,setter:Rt,cols:2},Ft[35672]={Type:Uint32Array,size:12,setter:Ct,cols:3},Ft[35673]={Type:Uint32Array,size:16,setter:Bt,cols:4},Ft[35674]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}},rows:2,cols:2},Ft[35675]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}},rows:3,cols:3},Ft[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}},rows:4,cols:4},Ft[35685]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}},rows:2,cols:3},Ft[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}},rows:2,cols:4},Ft[35687]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}},rows:3,cols:2},Ft[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}},rows:3,cols:4},Ft[35689]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}},rows:4,cols:2},Ft[35690]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}},rows:4,cols:3},Ft[35678]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:_t},Ft[35680]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Et},Ft[35679]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Pt},Ft[35682]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:_t},Ft[36289]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:It},Ft[36292]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:It},Ft[36293]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Et},Ft[36298]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:_t},Ft[36299]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Pt},Ft[36300]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Et},Ft[36303]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:It},Ft[36306]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:_t},Ft[36307]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Pt},Ft[36308]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:Et},Ft[36311]={Type:null,size:0,setter:kt,arraySetter:Ot,bindPoint:It};const Yt={};Yt[5126]={size:4,setter:Lt},Yt[35664]={size:8,setter:Lt},Yt[35665]={size:12,setter:Lt},Yt[35666]={size:16,setter:Lt},Yt[5124]={size:4,setter:Dt},Yt[35667]={size:8,setter:Dt},Yt[35668]={size:12,setter:Dt},Yt[35669]={size:16,setter:Dt},Yt[5125]={size:4,setter:Nt},Yt[36294]={size:8,setter:Nt},Yt[36295]={size:12,setter:Nt},Yt[36296]={size:16,setter:Nt},Yt[35670]={size:4,setter:Dt},Yt[35671]={size:8,setter:Dt},Yt[35672]={size:12,setter:Dt},Yt[35673]={size:16,setter:Dt},Yt[35674]={size:4,setter:Gt,count:2},Yt[35675]={size:9,setter:Gt,count:3},Yt[35676]={size:16,setter:Gt,count:4};const Ht=/ERROR:\s*\d+:(\d+)/gi;const $t=/^[ \t]*\n/;function Wt(t){let e=0;return $t.test(t)&&(e=1,t=t.replace($t,"")),{lineOffset:e,shaderSource:t}}function qt(t,e){return t.errorCallback(e),t.callback&&setTimeout((()=>{t.callback(`${e}\n${t.errors.join("\n")}`)})),null}function jt(t,e,n,r){const i=t.createShader(n);return t.shaderSource(i,Wt(e).shaderSource),t.compileShader(i),r.callback||function(t,e,n,r){r=r||vt;const i=t.getShaderParameter(n,35713);if(!i){const i=t.getShaderInfoLog(n),{lineOffset:o,shaderSource:s}=Wt(t.getShaderSource(n));r(`${function(t,e="",n=0){const r=[...e.matchAll(Ht)],i=new Map(r.map(((t,n)=>{const i=parseInt(t[1]),o=r[n+1],s=o?o.index:e.length;return[i-1,e.substring(t.index,s)]})));return t.split("\n").map(((t,e)=>{const r=i.get(e);return`${e+1+n}: ${t}${r?`\n\n^^^ ${r}`:""}`})).join("\n")}(s,i,o)}\nError compiling ${pt(t,e)}: ${i}`)}return i}(t,n,i,r.errorCallback)?i:(t.deleteShader(i),null)}function Qt(t,e,n){let r,i,o;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback&&t.errors)return t;const e=t;n=e.errorCallback,t=e.attribLocations,r=e.transformFeedbackVaryings,i=e.transformFeedbackMode,o=e.callback}const s=n||vt,a=[],c={errorCallback(t,...e){a.push(t),s(t,...e)},transformFeedbackVaryings:r,transformFeedbackMode:i,callback:o,errors:a};if(t){let n={};Array.isArray(t)?t.forEach((function(t,r){n[t]=e?e[r]:r})):n=t,c.attribLocations=n}return c}const Xt=["VERTEX_SHADER","FRAGMENT_SHADER"];function Vt(t,e){return e.indexOf("frag")>=0?35632:e.indexOf("vert")>=0?35633:void 0}function Kt(t,e){e.forEach((function(e){t.deleteShader(e)}))}const Zt=(t=0)=>new Promise((e=>setTimeout(e,t)));function Jt(t,e,n,r,i){const o=Qt(n,r,i),s=[],a=[];for(let n=0;n<e.length;++n){let r=e[n];if("string"==typeof r){const e=bt(r),i=e?e.text:r;let s=t[Xt[n]];e&&e.type&&(s=Vt(0,e.type)||s),r=jt(t,i,s,o),a.push(r)}c=r,"undefined"!=typeof WebGLShader&&c instanceof WebGLShader&&s.push(r)}var c;if(s.length!==e.length)return Kt(t,a),qt(o,"not enough shaders for program");const u=t.createProgram();s.forEach((function(e){t.attachShader(u,e)})),o.attribLocations&&Object.keys(o.attribLocations).forEach((function(e){t.bindAttribLocation(u,o.attribLocations[e],e)}));let f=o.transformFeedbackVaryings;return f&&(f.attribs&&(f=f.attribs),Array.isArray(f)||(f=Object.keys(f)),t.transformFeedbackVaryings(u,f,o.transformFeedbackMode||35981)),t.linkProgram(u),o.callback?(async function(t,e,n){const r=t.getExtension("KHR_parallel_shader_compile"),i=r?(t,e)=>t.getProgramParameter(e,r.COMPLETION_STATUS_KHR):()=>!0;let o=0;do{await Zt(o),o=1e3/60}while(!i(t,e));const s=te(t,e,n.errorCallback),a=s?void 0:n.errors.join("\n");if(!s){(n.errorCallback||vt)(a),t.deleteProgram(e),e=null}n.callback(a,e)}(t,u,o),null):te(t,u,o.errorCallback)?u:(t.deleteProgram(u),Kt(t,a),null)}function te(t,e,n){n=n||vt;const r=t.getProgramParameter(e,35714);if(!r){n(`Error in program linking: ${t.getProgramInfoLog(e)}`)}return r}function ee(t,e,n,r,i){const o=Qt(n,r,i),s=[];for(let n=0;n<e.length;++n){const r=jt(t,e[n],t[Xt[n]],o);if(!o.callback&&!r)return null;s.push(r)}return Jt(t,s,o)}function ne(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const re=/(\.|\[|]|\w+)/g;function ie(t,e,n,r){const i=t.split(re).filter((t=>""!==t));let o=0,s="";for(;;){const t=i[o++];s+=t;const c=(a=t[0])>="0"&&a<="9",u=c?parseInt(t):t;c&&(s+=i[o++]);if(o===i.length){n[u]=e;break}{const t=i[o++],e="["===t,a=n[u]||(e?[]:{});n[u]=a,n=a,r[s]=r[s]||function(t){return function(e){ce(t,e)}}(a),s+=t}}var a}function oe(t,e){let n=0;function r(e,r,i){const o=r.name.endsWith("[0]"),s=r.type,a=Ft[s];if(!a)throw new Error(`unknown type: 0x${s.toString(16)}`);let c;if(a.bindPoint){const e=n;n+=r.size,c=o?a.arraySetter(t,s,e,i,r.size):a.setter(t,s,e,i,r.size)}else c=a.arraySetter&&o?a.arraySetter(t,i):a.setter(t,i);return c.location=i,c}const i={},o={},s=t.getProgramParameter(e,35718);for(let n=0;n<s;++n){const s=t.getActiveUniform(e,n);if(ne(s))continue;let a=s.name;a.endsWith("[0]")&&(a=a.substr(0,a.length-3));const c=t.getUniformLocation(e,s.name);if(c){const t=r(0,s,c);i[a]=t,ie(a,t,o,i)}}return i}function se(t,e){const n={},r=t.getProgramParameter(e,35971);for(let i=0;i<r;++i){const r=t.getTransformFeedbackVarying(e,i);n[r.name]={index:i,type:r.type,size:r.size}}return n}function ae(t,e){const n=t.getProgramParameter(e,35718),r=[],i=[];for(let o=0;o<n;++o){i.push(o),r.push({});const n=t.getActiveUniform(e,o);r[o].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const o=n[0],s=n[1];t.getActiveUniforms(e,i,t[o]).forEach((function(t,e){r[e][s]=t}))}));const o={},s=t.getProgramParameter(e,35382);for(let n=0;n<s;++n){const r=t.getActiveUniformBlockName(e,n),i={index:t.getUniformBlockIndex(e,r),usedByVertexShader:t.getActiveUniformBlockParameter(e,n,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,n,35398),size:t.getActiveUniformBlockParameter(e,n,35392),uniformIndices:t.getActiveUniformBlockParameter(e,n,35395)};i.used=i.usedByVertexShader||i.usedByFragmentShader,o[r]=i}return{blockSpecs:o,uniformData:r}}function ce(t,e){for(const n in e){const r=t[n];"function"==typeof r?r(e[n]):ce(t[n],e[n])}}function ue(t,...e){const n=t.uniformSetters||t,r=e.length;for(let t=0;t<r;++t){const r=e[t];if(Array.isArray(r)){const t=r.length;for(let e=0;e<t;++e)ue(n,r[e])}else for(const t in r){const e=n[t];e&&e(r[t])}}}function fe(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;++i){const r=t.getActiveAttrib(e,i);if(ne(r))continue;const o=t.getAttribLocation(e,r.name),s=Yt[r.type],a=s.setter(t,o,s);a.location=o,n[r.name]=a}return n}function le(t,e){for(const n in e){const r=t[n];r&&r(e[n])}}function he(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(le(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(34963,n.indices))}function me(t,e){const n={program:e,uniformSetters:oe(t,e),attribSetters:fe(t,e)};return dt(t)&&(n.uniformBlockSpec=ae(t,e),n.transformFeedbackInfo=se(t,e)),n}const ge=/\s|{|}|;/;function de(t,e,n,r,i){const o=Qt(n,r,i),s=[];if(e=e.map((function(t){if(!ge.test(t)){const e=bt(t);if(e)t=e.text;else{const e=`no element with id: ${t}`;o.errorCallback(e),s.push(e)}}return t})),s.length)return qt(o,"");const a=o.callback;a&&(o.callback=(e,n)=>{let r;e||(r=me(t,n)),a(e,r)});const c=ee(t,e,o);return c?me(t,c):null}function pe(t,e,n,r,i,o){n=void 0===n?4:n;const s=e.indices,a=e.elementType,c=void 0===r?e.numElements:r;i=void 0===i?0:i,a||s?void 0!==o?t.drawElementsInstanced(n,c,void 0===a?5123:e.elementType,i,o):t.drawElements(n,c,void 0===a?5123:e.elementType,i):void 0!==o?t.drawArraysInstanced(n,i,c,o):t.drawArrays(n,i,c)}const ye=36096,ve=33306,be={};be[34041]=ve,be[6401]=36128,be[36168]=36128,be[6402]=ye,be[33189]=ye,be[33190]=ye,be[36012]=ye,be[35056]=ve,be[36013]=ve;const xe={};xe[32854]=!0,xe[32855]=!0,xe[36194]=!0,xe[34041]=!0,xe[33189]=!0,xe[6401]=!0,xe[36168]=!0;function Ae(t,e){e=e||1,e=Math.max(0,e);const n=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}class we{constructor(t){this.gl=t,this.y=0,this.isActive=this.canScroll,document.onscroll=t=>this.onScroll(t)}onScroll(t){this.isActive&&(this.y=window.scrollY*this.gl.vp.px)}resize(t){this.gl=t,this.isActive=this.canScroll,this.y=window.scrollY*this.gl.vp.px}get canScroll(){return document.documentElement.scrollHeight>window.innerHeight}}class ze{constructor(t,e={z:-9,fov:.6,near:1,far:1024}){e.fov=35*Math.PI/180,this.camera=e}get(t){return this.camera.mat=y.translate(y.perspective(this.camera.fov,t.canvas.width/t.canvas.height,this.camera.near,this.camera.far),[0,0,this.camera.z]),this.camera}}var Te=[t("#define GLSLIFY 1\nattribute vec4 position;\n\nvarying vec2 v_xy;\n\nvoid main() {\n  gl_Position = position;\n  v_xy = position.xy;\n}\n  "),t("precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_res;\nuniform float u_time;\nuniform vec2 u_mouse;\nvarying vec2 v_xy;\n\nuniform vec4 u_params;\nuniform vec4 u_params2;\nuniform vec3 u_color;\n\nconst float MPI = 6.28318530718;\n\n// cos mix\nvec3 palette( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d ){\n    return a + b * cos( 6.28318 * ( c * t + d));\n}\n\n// hue shift\nvec3 hueShift( vec3 color, float hueAdjust ){\n\n    const vec3  kRGBToYPrime = vec3 (0.299, 0.587, 0.114);\n    const vec3  kRGBToI      = vec3 (0.596, -0.275, -0.321);\n    const vec3  kRGBToQ      = vec3 (0.212, -0.523, 0.311);\n\n    const vec3  kYIQToR     = vec3 (1.0, 0.956, 0.621);\n    const vec3  kYIQToG     = vec3 (1.0, -0.272, -0.647);\n    const vec3  kYIQToB     = vec3 (1.0, -1.107, 1.704);\n\n    float   YPrime  = dot (color, kRGBToYPrime);\n    float   I       = dot (color, kRGBToI);\n    float   Q       = dot (color, kRGBToQ);\n    float   hue     = atan (Q, I);\n    float   chroma  = sqrt (I * I + Q * Q);\n\n    hue += hueAdjust;\n\n    Q = chroma * sin (hue);\n    I = chroma * cos (hue);\n\n    vec3    yIQ   = vec3 (YPrime, I, Q);\n\n    return vec3( dot (yIQ, kYIQToR), dot (yIQ, kYIQToG), dot (yIQ, kYIQToB) );\n\n}\n\n// noise\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat cnoise(vec3 P){\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n// colors\nconst vec3 col1 = vec3(0.5, 0.5, 0.5);\nconst vec3 col2 = vec3(0.5, 0.5, 0.5);\nconst vec3 col3 = vec3(1.0, 1.0, 1.0);\n\t\t\t\t\n\nvoid main() {\n  // params\n float MULT_X = u_params.x;\n float MULT_Y = u_params.y;\n float HUE = u_params.z; // 0 / 360\n float BRIGHTNESS = u_params.w;\n float MOUSE_BRIGHTNESS = u_params2.x; // -1 / 1 -- -1 being black and 100% power\n float SCALE = u_params2.y;\n float NOISE_FACTOR = u_params2.z;\n float BW = u_params2.w;\n\n  // shader\n  vec2 uv = gl_FragCoord.xy / u_res;\n  vec2 scale_uv = uv;\n  scale_uv -= vec2(.5);\n  scale_uv *= SCALE;\n  \n  // noise\n  float noise = cnoise(vec3(scale_uv, u_time)) * NOISE_FACTOR;\n  \n  // mouse\n  float c_d = distance(scale_uv.x, .5);\n  c_d = smoothstep(0., .6, c_d);\n  vec2 m_uv = scale_uv * (c_d + cos(scale_uv.x * MULT_X) * noise - sin(scale_uv.y * MULT_Y) * noise);\n\n  // end uv deformation\n  scale_uv += vec2(.5);\n\n  // # COMPUTE\n  vec3 col = palette(\n    u_time + cos((m_uv.x) + (m_uv.y)), \n    col1, col2, col2, u_color\n  );\n\n  // mouse \n  float dist = distance(m_uv, u_mouse * SCALE/2.);\n  \n  dist = 1. - dist;\n  dist = smoothstep(.3, 1., dist);\n\n  vec3 shift_col = hueShift(col, sin(u_time * MPI));\n\n  col = mix(\n    col, \n    shift_col * col + (dist * MOUSE_BRIGHTNESS), \n    dist\n  );\n\n \n  // final shift\n  col = hueShift(col, HUE);\n  col *= BRIGHTNESS;\n\n  float bw_col = (col.r + col.g + col.b) * .3;\n  col = mix(col, vec3(bw_col), BW);\n  \n\n  gl_FragColor.rgb = col;\n  gl_FragColor.a = 1.;\n}\n  ")];class _e{constructor(t,e={}){this.gl=t,this.data=e,this.shaders=Te,this.programInfo=de(this.gl,this.shaders),this.gl.useProgram(this.programInfo.program),this.setBuffAtt(),this.setUniforms()}setBuffAtt(){this.bufferInfo=$(this.gl,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]})}setUniforms(){this.uniforms={u_res:[this.gl.canvas.width,this.gl.canvas.height],u_time:0,u_params:[this.data.multx,this.data.multy,this.data.hue,this.data.brightness],u_params2:[this.data.mouse,this.data.scale,this.data.noise,this.data.bw],u_color:this.data.color},this.gl.useProgram(this.programInfo.program),ue(this.programInfo,this.uniforms)}render(t,{x:e,y:n}){this.gl.useProgram(this.programInfo.program),he(this.gl,this.programInfo,this.bufferInfo),ue(this.programInfo,{u_time:t,u_mouse:[e,n]}),pe(this.gl,this.bufferInfo)}resize(t){this.gl=t,this.gl.useProgram(this.programInfo.program),ue(this.programInfo,{u_res:[this.gl.canvas.width,this.gl.canvas.height]})}}class Ee{constructor(t){this.gl=t,this.computeParams(),this.events(),this.create()}events(){this.mouse={x:0,y:0,wx:window.innerWidth,wy:window.innerHeight},document.addEventListener("mousemove",(t=>{this.mouse.x=t.clientX/this.mouse.wx*2-1,this.mouse.y=-t.clientY/this.mouse.wy*2+1}))}create(){this.quad=new _e(this.gl,this.params)}render(t,e){this.quad&&this.quad.render(t*this.params.time,this.mouse)}resize(t){this.gl=t,this.mouse.wx=window.innerWidth,this.mouse.wy=window.innerHeight,this.quad&&this.quad.resize(this.gl)}computeParams(){const t=document.querySelector('[data-gradient="wrapper"]'),e=[parseFloat(t.dataset.red)||0,parseFloat(t.dataset.green)||.33,parseFloat(t.dataset.blue)||.66];this.params={multx:parseFloat(t.dataset.multx)||.2,multy:parseFloat(t.dataset.multy)||.8,hue:parseFloat(t.dataset.hue)||0,brightness:parseFloat(t.dataset.brightness)||.8,mouse:parseFloat(t.dataset.mouse)||1,scale:parseFloat(t.dataset.scale)||.2,noise:parseFloat(t.dataset.noise)||1,color:e,bw:parseFloat(t.dataset.bw)||0,time:parseFloat(t.dataset.time)||1}}}var Pe=[t("#define GLSLIFY 1\nattribute vec4 position;\n\nvoid main() {\n  vec4 pos = position;\n  gl_Position = position;\n}\n  "),t("precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_res;\nuniform float u_time;\n\nuniform sampler2D u_diff;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_res;\n\n  vec3 img = texture2D(u_diff, uv).rgb;\n\n  //img.rg += uv * .1;\n\n  gl_FragColor.rgb = img.rgb;\n  gl_FragColor.a = 1.;\n}\n  ")];class Ie{constructor(t,e={}){this.gl=t,this.data=e,this.shaders=Pe,this.programInfo=de(this.gl,this.shaders),this.gl.useProgram(this.programInfo.program),this.setBuffAtt(),this.setUniforms()}setBuffAtt(){this.bufferInfo=$(this.gl,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]})}setUniforms(){this.uniforms={u_res:[this.gl.canvas.width,this.gl.canvas.height],u_time:0},this.gl.useProgram(this.programInfo.program),ue(this.programInfo,this.uniforms)}render(t,e=null){this.gl.useProgram(this.programInfo.program),he(this.gl,this.programInfo,this.bufferInfo),ue(this.programInfo,{u_time:t,u_diff:e}),pe(this.gl,this.bufferInfo)}resize(t){this.gl=t,this.gl.useProgram(this.programInfo.program),ue(this.programInfo,{u_res:[this.gl.canvas.width,this.gl.canvas.height]})}}class Fe{constructor(t){this.gl=t}create(){this.fbi=this.gl.createFramebuffer(),this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.canvas.width,this.gl.canvas.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.gl.canvas.width,this.gl.canvas.height),this.attach(),this.createPlane(),this.unbind()}attach(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbi),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)}unbind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}createPlane(){this.quad=new Ie(this.gl)}setupRender(){this.isActive&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbi),this.gl.clear(this.gl.COLOR_BUFFER_BIT||this.gl.DEPTH_BUFFER_BIT))}render(t){this.isActive&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.quad&&this.quad.render(t,this.texture))}resize(t){this.gl=t,this.create(),this.quad&&this.quad.resize(this.gl)}}class Se{constructor(){this.canvas=document.getElementById("c"),this.gl=this.canvas.getContext("webgl"),this.gl.clearColor(.04,.04,.04,1),this.gl.vp={dpr:Math.min(window.devicePixelRatio,2)},this.camera=new ze(this.gl),this.gl.camera=this.camera.get(this.gl),new ResizeObserver((t=>this.resize(t[0].contentRect))).observe(this.canvas),this.resize(),this.scroll=new we(this.gl),this.time=0,this.create(),this.render(),this.resize()}create(){this.post=new Fe(this.gl),this.post.isActive=!1,this.scene=new Ee(this.gl)}render(){this.time+=.01,this.gl.clear(this.gl.COLOR_BUFFER_BIT||this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.post&&this.post.isActive&&this.post.setupRender(),this.scene&&this.scene.render(this.time,this.scroll.y),this.post&&this.post.isActive&&this.post.render(this.time),requestAnimationFrame(this.render.bind(this))}resize(){Ae(this.gl.canvas,this.gl.vp.dpr),this.gl.vp={viewSize:this.viewSize,px:this.pixelSize,inner:[window.innerWidth,window.innerHeight],scroll:window.scrollY},this.gl.camera&&(this.gl.camera=this.camera.get(this.gl)),this.scroll&&this.scroll.resize(this.gl),this.post&&this.post.resize(this.gl),this.scene&&this.scene.resize(this.gl)}get viewSize(){const t=Math.abs(this.gl.camera.z*Math.tan(this.gl.camera.fov/2)*2);return[t*(this.gl.canvas.width/this.gl.canvas.height),t]}get pixelSize(){return this.viewSize[0]/window.innerWidth}}new class{constructor(){this.gl=new Se("c")}}})();
//# sourceMappingURL=app.js.map
